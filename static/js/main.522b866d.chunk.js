(this["webpackJsonpimage-drag-and-scale-example"]=this["webpackJsonpimage-drag-and-scale-example"]||[]).push([[0],{15:function(t,e,r){},19:function(t,e,r){"use strict";r.r(e);var a=r(0),n=r.n(a),o=r(5),s=r.n(o),i=(r(15),r(27)),c=r(1),l=Object(i.a)((function(t){return{verticalTransformerControl:{"&:hover":{cursor:"ns-resize"}},horizontalTransformerControl:{"&:hover":{cursor:"ew-resize"}},neswTransformerControl:{"&:hover":{cursor:"nesw-resize"}},nwseTransformerControl:{"&:hover":{cursor:"nwse-resize"}},transformerControl:{position:"absolute",zIndex:function(t){return t.index},background:"lightgrey",boxShadow:"0px 1px 2px black",pointerEvents:"auto"},cornerTransformer:{width:10,height:10,borderRadius:"50%"},edgeTransformer:{width:50,height:10,borderRadius:"3px"},rightTr:{top:"50%",left:"100%",transform:"translate(-50%, -50%) rotate(90deg)"},topTr:{top:0,left:"50%",transform:"translate(-50%, -50%)"},topRightTr:{right:0,transform:"translate(50%, -50%)"},bottomTr:{left:"50%",bottom:0,transform:"translate(-50%, 50%)"},bottomRightTr:{right:0,bottom:0,transform:"translate(50%, 50%)"},leftTr:{top:"50%",transform:"translate(-50%, -50%) rotate(90deg)"},bottomLeftTr:{bottom:0,transform:"translate(-50%, 50%)"},topLeftTr:{transform:"translate(-50%, -50%)"},container:{position:"absolute",width:function(t){return t.scaledWidth},height:function(t){return t.scaledHeight},transform:function(t){return"translate("+t.translateX+"px, "+t.translateY+"px)"}}}})),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},d=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],a=!0,n=!1,o=void 0;try{for(var s,i=t[Symbol.iterator]();!(a=(s=i.next()).done)&&(r.push(s.value),!e||r.length!==e);a=!0);}catch(c){n=!0,o=c}finally{try{!a&&i.return&&i.return()}finally{if(n)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},m=function(t){var e=t.children,r=t.data,a=l(r.data),o=function(t){var e=t.classes;return[[{id:"top-right-tr",className:Object(c.a)(e.neswTransformerControl,e.transformerControl,e.cornerTransformer,e.topRightTr)},{id:"top-tr",className:Object(c.a)(e.verticalTransformerControl,e.transformerControl,e.edgeTransformer,e.topTr)},{id:"right-tr",className:Object(c.a)(e.horizontalTransformerControl,e.transformerControl,e.edgeTransformer,e.rightTr)},{id:"bottom-tr",className:Object(c.a)(e.verticalTransformerControl,e.transformerControl,e.edgeTransformer,e.bottomTr)},{id:"bottom-right-tr",className:Object(c.a)(e.nwseTransformerControl,e.transformerControl,e.cornerTransformer,e.bottomRightTr)},{id:"left-tr",className:Object(c.a)(e.horizontalTransformerControl,e.transformerControl,e.edgeTransformer,e.leftTr)},{id:"bottom-left-tr",className:Object(c.a)(e.neswTransformerControl,e.transformerControl,e.cornerTransformer,e.bottomLeftTr)},{id:"top-left-tr",className:Object(c.a)(e.nwseTransformerControl,e.transformerControl,e.cornerTransformer,e.topLeftTr)}]]}({classes:a}),s=d(o,1)[0];return n.a.createElement("div",{className:a.container},s.map((function(t,e){return function(t){var e=t.key,r=t.id,a=t.className;return n.a.createElement("div",{key:e,id:r,className:a+" transformer"})}({key:e,id:t.id,className:t.className+" "+r.imageId})})),e)},f=function(t){var e=t.rect,r=t.mouseEvent;e.scaledWidth=r.clientX-e.translateX-e.x,e.scaledWidth=e.scaledWidth<0?0:e.scaledWidth},v=function(t){var e=t.rect,r=t.mouseEvent,a=e.x+e.translateX;r.clientX<=a+e.scaledWidth?(e.scaledWidth=a+e.scaledWidth-r.clientX,a=r.clientX,e.translateX=a-e.x):e.scaledWidth=0},g=function(t){var e=t.rect,r=t.mouseEvent,a=e.translateY+e.y;r.clientY<=a+e.scaledHeight?(e.scaledHeight=a+e.scaledHeight-r.clientY,a=r.clientY,e.translateY=a-e.y):e.scaledHeight=0},h=function(t){var e=t.rect,r=t.mouseEvent;e.scaledHeight=r.clientY-(e.y+e.translateY),e.scaledHeight=e.scaledHeight<0?0:e.scaledHeight},p=f,E=g,b=function(t){var e=t.rect,r=t.mouseEvent;f({rect:e,mouseEvent:r}),g({rect:e,mouseEvent:r})},T=h,x=function(t){var e=t.rect,r=t.mouseEvent;f({rect:e,mouseEvent:r}),h({rect:e,mouseEvent:r})},y=v,w=function(t){var e=t.rect,r=t.mouseEvent;v({rect:e,mouseEvent:r}),h({rect:e,mouseEvent:r})},C=function(t){var e=t.rect,r=t.mouseEvent;v({rect:e,mouseEvent:r}),g({rect:e,mouseEvent:r})},I=Object(i.a)((function(t){return{translator:{fontSize:0,position:"absolute",transform:function(t){return"translate("+t.x+"px, "+t.y+"px)"}},overlay:{position:"absolute",transform:function(t){return"translate("+(t.x+t.translateX+5)+"px,"+(t.y+t.translateY+5)+"px)"},width:function(t){return t.scaledWidth-10},height:function(t){return t.scaledHeight-10},pointerEvents:"auto",zIndex:function(t){return t.index-1}}}})),N=function(t){var e=t.children,r=t.data,a=I(r.data);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:a.translator},e),n.a.createElement("div",{className:a.overlay+" translator "+r.imageId}))},X=Object(i.a)((function(t){return{img:{display:"inline-block",width:"100%",height:"100%",objectFit:"cover"}}})),Y=function(t){var e=t.data,r=t.containerRef,a=n.a.useState({data:e,status:null,imageId:"unique-id"+e.id,targetType:null,targetId:null}),o=d(a,2),s=o[0],i=o[1],c=X();return n.a.useEffect((function(){var t=r.current.getBoundingClientRect(),e=function(t){var e=null,r=null;t.target.classList.contains("transformer")?(e="transformer",r=t.target.id):t.target.classList.contains("translator")&&(e="translator",r=t.target.id),t.target.classList.contains(s.imageId)&&i((function(a){return u({},a,{status:"mouse-down",targetType:e,targetId:r,startPoint:{x:t.clientX,y:t.clientY,dataX:a.data.x,dataY:a.data.y}})})),t.preventDefault()},a=function(e){"mouse-down"===s.status&&i((function(r){return"transformer"===r.targetType?(function(t,e){"top-right-tr"===e.targetId?b({rect:e.data,mouseEvent:t}):"right-tr"===e.targetId?p({rect:e.data,mouseEvent:t}):"top-tr"===e.targetId?E({rect:e.data,mouseEvent:t}):"bottom-tr"===e.targetId?T({rect:e.data,mouseEvent:t}):"bottom-right-tr"===e.targetId?x({rect:e.data,mouseEvent:t}):"left-tr"===e.targetId?y({rect:e.data,mouseEvent:t}):"bottom-left-tr"===e.targetId?w({rect:e.data,mouseEvent:t}):"top-left-tr"===e.targetId&&C({rect:e.data,mouseEvent:t})}({clientX:e.clientX-t.left,clientY:e.clientY-t.top},r),u({},r)):"translator"===r.targetType?(function(t,e){e.data.x=t.clientX-e.startPoint.x+e.startPoint.dataX,e.data.y=t.clientY-e.startPoint.y+e.startPoint.dataY}(e,r),u({},r)):u({},r)})),e.preventDefault()},n=function(t){"mouse-down"===s.status&&i((function(t){return u({},t,{status:"mouse-up",targetType:null,targetId:null})})),t.preventDefault()};return document.addEventListener("mouseup",n),document.addEventListener("mousedown",e),document.addEventListener("mousemove",a),function(){document.removeEventListener("mouseup",n),document.removeEventListener("mousedown",e),document.removeEventListener("mousemove",a)}}),[e,s.imageId,s.status]),n.a.createElement(N,{data:s},n.a.createElement(m,{data:s},n.a.createElement("img",{className:c.img,src:s.data.src,alt:s.data.alt})))},j=i.a((function(t){return{container:{position:"relative",width:500,height:500,border:"2px solid red",overflow:"hidden",transform:"translate(100px, 200px)"}}})),O=function(t){var e=j(),r=n.a.useRef();return n.a.createElement("div",{className:"App"},n.a.createElement("div",{ref:r,className:e.container},n.a.createElement(Y,{data:{x:50,y:50,translateX:0,translateY:0,scaledWidth:100,scaledHeight:100,width:100,height:100,src:"https://source.unsplash.com/random/1000x1000",alt:"random",id:"124",index:2},containerRef:r})))};s.a.render(n.a.createElement(O,null),document.getElementById("root"))},8:function(t,e,r){t.exports=r(19)}},[[8,1,2]]]);
//# sourceMappingURL=main.522b866d.chunk.js.map